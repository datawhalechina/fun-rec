{"ast":null,"code":"var cachePromise = new Map();\n\nvar getCachePromise = function getCachePromise(cacheKey) {\n  return cachePromise.get(cacheKey);\n};\n\nvar setCachePromise = function setCachePromise(cacheKey, promise) {\n  // Should cache the same promise, cannot be promise.finally\n  // Because the promise.finally will change the reference of the promise\n  cachePromise.set(cacheKey, promise); // no use promise.finally for compatibility\n\n  promise.then(function (res) {\n    cachePromise[\"delete\"](cacheKey);\n    return res;\n  })[\"catch\"](function () {\n    cachePromise[\"delete\"](cacheKey);\n  });\n};\n\nexport { getCachePromise, setCachePromise };","map":{"version":3,"sources":["E:/wcy/Github/fun-rec/codes/news_recsys/news_rec_web/my-app-ts/node_modules/ahooks/es/useRequest/src/utils/cachePromise.js"],"names":["cachePromise","Map","getCachePromise","cacheKey","get","setCachePromise","promise","set","then","res"],"mappings":"AAAA,IAAIA,YAAY,GAAG,IAAIC,GAAJ,EAAnB;;AAEA,IAAIC,eAAe,GAAG,SAASA,eAAT,CAAyBC,QAAzB,EAAmC;AACvD,SAAOH,YAAY,CAACI,GAAb,CAAiBD,QAAjB,CAAP;AACD,CAFD;;AAIA,IAAIE,eAAe,GAAG,SAASA,eAAT,CAAyBF,QAAzB,EAAmCG,OAAnC,EAA4C;AAChE;AACA;AACAN,EAAAA,YAAY,CAACO,GAAb,CAAiBJ,QAAjB,EAA2BG,OAA3B,EAHgE,CAG3B;;AAErCA,EAAAA,OAAO,CAACE,IAAR,CAAa,UAAUC,GAAV,EAAe;AAC1BT,IAAAA,YAAY,CAAC,QAAD,CAAZ,CAAuBG,QAAvB;AACA,WAAOM,GAAP;AACD,GAHD,EAGG,OAHH,EAGY,YAAY;AACtBT,IAAAA,YAAY,CAAC,QAAD,CAAZ,CAAuBG,QAAvB;AACD,GALD;AAMD,CAXD;;AAaA,SAASD,eAAT,EAA0BG,eAA1B","sourcesContent":["var cachePromise = new Map();\n\nvar getCachePromise = function getCachePromise(cacheKey) {\n  return cachePromise.get(cacheKey);\n};\n\nvar setCachePromise = function setCachePromise(cacheKey, promise) {\n  // Should cache the same promise, cannot be promise.finally\n  // Because the promise.finally will change the reference of the promise\n  cachePromise.set(cacheKey, promise); // no use promise.finally for compatibility\n\n  promise.then(function (res) {\n    cachePromise[\"delete\"](cacheKey);\n    return res;\n  })[\"catch\"](function () {\n    cachePromise[\"delete\"](cacheKey);\n  });\n};\n\nexport { getCachePromise, setCachePromise };"]},"metadata":{},"sourceType":"module"}