{"ast":null,"code":"import React, { useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nconst classPrefix = `adm-ellipsis`;\nconst defaultProps = {\n  direction: 'end',\n  rows: 1,\n  expandText: '',\n  collapseText: '',\n  stopPropagationForActionButtons: []\n};\nexport const Ellipsis = p => {\n  const props = mergeProps(defaultProps, p);\n  const rootRef = useRef(null);\n  const [ellipsised, setEllipsised] = useState({});\n  const [expanded, setExpanded] = useState(false);\n  const [exceeded, setExceeded] = useState(false);\n\n  function calcEllipsised() {\n    const root = rootRef.current;\n    if (!root) return;\n    const originStyle = window.getComputedStyle(root);\n    const container = document.createElement('div');\n    const styleNames = Array.prototype.slice.apply(originStyle);\n    styleNames.forEach(name => {\n      container.style.setProperty(name, originStyle.getPropertyValue(name));\n    });\n    container.style.position = 'fixed';\n    container.style.left = '999999px';\n    container.style.top = '999999px';\n    container.style.zIndex = '-1000';\n    container.style.height = 'auto';\n    container.style.minHeight = 'auto';\n    container.style.maxHeight = 'auto';\n    container.style.textOverflow = 'clip';\n    container.style.whiteSpace = 'normal';\n    container.style.webkitLineClamp = 'unset';\n    container.style.webkitBoxOrient = 'unset';\n    container.style.display = 'block';\n    const lineHeight = pxToNumber(originStyle.lineHeight);\n    const maxHeight = Math.floor(lineHeight * (props.rows + 0.5) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n    container.innerText = props.content;\n    document.body.appendChild(container);\n\n    if (container.offsetHeight <= maxHeight) {\n      setExceeded(false);\n    } else {\n      setExceeded(true);\n      const end = props.content.length;\n      const actionText = expanded ? props.collapseText : props.expandText;\n\n      function check(left, right) {\n        if (right - left <= 1) {\n          if (props.direction === 'end') {\n            return {\n              leading: props.content.slice(0, left) + '...'\n            };\n          } else {\n            return {\n              tailing: '...' + props.content.slice(right, end)\n            };\n          }\n        }\n\n        const middle = Math.round((left + right) / 2);\n\n        if (props.direction === 'end') {\n          container.innerText = props.content.slice(0, middle) + '...' + actionText;\n        } else {\n          container.innerText = actionText + '...' + props.content.slice(middle, end);\n        }\n\n        if (container.offsetHeight <= maxHeight) {\n          if (props.direction === 'end') {\n            return check(middle, right);\n          } else {\n            return check(left, middle);\n          }\n        } else {\n          if (props.direction === 'end') {\n            return check(left, middle);\n          } else {\n            return check(middle, right);\n          }\n        }\n      }\n\n      function checkMiddle(leftPart, rightPart) {\n        if (leftPart[1] - leftPart[0] <= 1 && rightPart[1] - rightPart[0] <= 1) {\n          return {\n            leading: props.content.slice(0, leftPart[0]) + '...',\n            tailing: '...' + props.content.slice(rightPart[1], end)\n          };\n        }\n\n        const leftPartMiddle = Math.floor((leftPart[0] + leftPart[1]) / 2);\n        const rightPartMiddle = Math.floor((rightPart[0] + rightPart[1]) / 2);\n        container.innerText = props.content.slice(0, leftPartMiddle) + '...' + actionText + '...' + props.content.slice(rightPartMiddle, end);\n\n        if (container.offsetHeight <= maxHeight) {\n          return checkMiddle([leftPartMiddle, leftPart[1]], [rightPart[0], rightPartMiddle]);\n        } else {\n          return checkMiddle([leftPart[0], leftPartMiddle], [rightPartMiddle, rightPart[1]]);\n        }\n      }\n\n      const middle = Math.floor((0 + end) / 2);\n      const ellipsised = props.direction === 'middle' ? checkMiddle([0, middle], [middle, end]) : check(0, end);\n      setEllipsised(ellipsised);\n    }\n\n    document.body.removeChild(container);\n  }\n\n  useResizeEffect(calcEllipsised, rootRef);\n  useIsomorphicLayoutEffect(() => {\n    calcEllipsised();\n  }, [props.content, props.direction, props.rows, props.expandText, props.collapseText]);\n  const expandActionElement = exceeded && props.expandText ? withStopPropagation(props.stopPropagationForActionButtons, React.createElement(\"a\", {\n    onClick: () => {\n      setExpanded(true);\n    }\n  }, props.expandText)) : null;\n  const collapseActionElement = exceeded && props.expandText ? withStopPropagation(props.stopPropagationForActionButtons, React.createElement(\"a\", {\n    onClick: () => {\n      setExpanded(false);\n    }\n  }, props.collapseText)) : null;\n\n  const renderContent = () => {\n    if (!exceeded) {\n      return props.content;\n    }\n\n    if (expanded) {\n      return React.createElement(React.Fragment, null, props.content, collapseActionElement);\n    } else {\n      return React.createElement(React.Fragment, null, ellipsised.leading, expandActionElement, ellipsised.tailing);\n    }\n  };\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classPrefix\n  }, renderContent()));\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}","map":{"version":3,"sources":["E:/wcy/Github/fun-rec/codes/news_recsys/news_rec_web/my-app-ts/node_modules/antd-mobile/es/components/ellipsis/ellipsis.js"],"names":["React","useRef","useState","mergeProps","withNativeProps","useResizeEffect","useIsomorphicLayoutEffect","withStopPropagation","classPrefix","defaultProps","direction","rows","expandText","collapseText","stopPropagationForActionButtons","Ellipsis","p","props","rootRef","ellipsised","setEllipsised","expanded","setExpanded","exceeded","setExceeded","calcEllipsised","root","current","originStyle","window","getComputedStyle","container","document","createElement","styleNames","Array","prototype","slice","apply","forEach","name","style","setProperty","getPropertyValue","position","left","top","zIndex","height","minHeight","maxHeight","textOverflow","whiteSpace","webkitLineClamp","webkitBoxOrient","display","lineHeight","pxToNumber","Math","floor","paddingTop","paddingBottom","innerText","content","body","appendChild","offsetHeight","end","length","actionText","check","right","leading","tailing","middle","round","checkMiddle","leftPart","rightPart","leftPartMiddle","rightPartMiddle","removeChild","expandActionElement","onClick","collapseActionElement","renderContent","Fragment","ref","className","value","match","Number"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useIsomorphicLayoutEffect } from 'ahooks';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nconst classPrefix = `adm-ellipsis`;\nconst defaultProps = {\n  direction: 'end',\n  rows: 1,\n  expandText: '',\n  collapseText: '',\n  stopPropagationForActionButtons: []\n};\nexport const Ellipsis = p => {\n  const props = mergeProps(defaultProps, p);\n  const rootRef = useRef(null);\n  const [ellipsised, setEllipsised] = useState({});\n  const [expanded, setExpanded] = useState(false);\n  const [exceeded, setExceeded] = useState(false);\n\n  function calcEllipsised() {\n    const root = rootRef.current;\n    if (!root) return;\n    const originStyle = window.getComputedStyle(root);\n    const container = document.createElement('div');\n    const styleNames = Array.prototype.slice.apply(originStyle);\n    styleNames.forEach(name => {\n      container.style.setProperty(name, originStyle.getPropertyValue(name));\n    });\n    container.style.position = 'fixed';\n    container.style.left = '999999px';\n    container.style.top = '999999px';\n    container.style.zIndex = '-1000';\n    container.style.height = 'auto';\n    container.style.minHeight = 'auto';\n    container.style.maxHeight = 'auto';\n    container.style.textOverflow = 'clip';\n    container.style.whiteSpace = 'normal';\n    container.style.webkitLineClamp = 'unset';\n    container.style.webkitBoxOrient = 'unset';\n    container.style.display = 'block';\n    const lineHeight = pxToNumber(originStyle.lineHeight);\n    const maxHeight = Math.floor(lineHeight * (props.rows + 0.5) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n    container.innerText = props.content;\n    document.body.appendChild(container);\n\n    if (container.offsetHeight <= maxHeight) {\n      setExceeded(false);\n    } else {\n      setExceeded(true);\n      const end = props.content.length;\n      const actionText = expanded ? props.collapseText : props.expandText;\n\n      function check(left, right) {\n        if (right - left <= 1) {\n          if (props.direction === 'end') {\n            return {\n              leading: props.content.slice(0, left) + '...'\n            };\n          } else {\n            return {\n              tailing: '...' + props.content.slice(right, end)\n            };\n          }\n        }\n\n        const middle = Math.round((left + right) / 2);\n\n        if (props.direction === 'end') {\n          container.innerText = props.content.slice(0, middle) + '...' + actionText;\n        } else {\n          container.innerText = actionText + '...' + props.content.slice(middle, end);\n        }\n\n        if (container.offsetHeight <= maxHeight) {\n          if (props.direction === 'end') {\n            return check(middle, right);\n          } else {\n            return check(left, middle);\n          }\n        } else {\n          if (props.direction === 'end') {\n            return check(left, middle);\n          } else {\n            return check(middle, right);\n          }\n        }\n      }\n\n      function checkMiddle(leftPart, rightPart) {\n        if (leftPart[1] - leftPart[0] <= 1 && rightPart[1] - rightPart[0] <= 1) {\n          return {\n            leading: props.content.slice(0, leftPart[0]) + '...',\n            tailing: '...' + props.content.slice(rightPart[1], end)\n          };\n        }\n\n        const leftPartMiddle = Math.floor((leftPart[0] + leftPart[1]) / 2);\n        const rightPartMiddle = Math.floor((rightPart[0] + rightPart[1]) / 2);\n        container.innerText = props.content.slice(0, leftPartMiddle) + '...' + actionText + '...' + props.content.slice(rightPartMiddle, end);\n\n        if (container.offsetHeight <= maxHeight) {\n          return checkMiddle([leftPartMiddle, leftPart[1]], [rightPart[0], rightPartMiddle]);\n        } else {\n          return checkMiddle([leftPart[0], leftPartMiddle], [rightPartMiddle, rightPart[1]]);\n        }\n      }\n\n      const middle = Math.floor((0 + end) / 2);\n      const ellipsised = props.direction === 'middle' ? checkMiddle([0, middle], [middle, end]) : check(0, end);\n      setEllipsised(ellipsised);\n    }\n\n    document.body.removeChild(container);\n  }\n\n  useResizeEffect(calcEllipsised, rootRef);\n  useIsomorphicLayoutEffect(() => {\n    calcEllipsised();\n  }, [props.content, props.direction, props.rows, props.expandText, props.collapseText]);\n  const expandActionElement = exceeded && props.expandText ? withStopPropagation(props.stopPropagationForActionButtons, React.createElement(\"a\", {\n    onClick: () => {\n      setExpanded(true);\n    }\n  }, props.expandText)) : null;\n  const collapseActionElement = exceeded && props.expandText ? withStopPropagation(props.stopPropagationForActionButtons, React.createElement(\"a\", {\n    onClick: () => {\n      setExpanded(false);\n    }\n  }, props.collapseText)) : null;\n\n  const renderContent = () => {\n    if (!exceeded) {\n      return props.content;\n    }\n\n    if (expanded) {\n      return React.createElement(React.Fragment, null, props.content, collapseActionElement);\n    } else {\n      return React.createElement(React.Fragment, null, ellipsised.leading, expandActionElement, ellipsised.tailing);\n    }\n  };\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    ref: rootRef,\n    className: classPrefix\n  }, renderContent()));\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}"]},"metadata":{},"sourceType":"module"}