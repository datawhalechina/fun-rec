{"ast":null,"code":"import { useEffect, useRef } from 'react';\n\nvar diffTwoDeps = function diffTwoDeps(deps1, deps2) {\n  //Let's do a reference equality check on 2 dependency list.\n  //If deps1 is defined, we iterate over deps1 and do comparison on each element with equivalent element from deps2\n  //As this func is used only in this hook, we assume 2 deps always have same length.\n  return deps1 ? deps1.map(function (_ele, idx) {\n    return deps1[idx] !== (deps2 === null || deps2 === void 0 ? void 0 : deps2[idx]) ? idx : -1;\n  }).filter(function (ele) {\n    return ele >= 0;\n  }) : deps2 ? deps2.map(function (_ele, idx) {\n    return idx;\n  }) : [];\n};\n\nvar useTrackedEffect = function useTrackedEffect(effect, deps) {\n  var previousDepsRef = useRef();\n  useEffect(function () {\n    var changes = diffTwoDeps(previousDepsRef.current, deps);\n    var previousDeps = previousDepsRef.current;\n    previousDepsRef.current = deps;\n    return effect(changes, previousDeps, deps);\n  }, deps);\n};\n\nexport default useTrackedEffect;","map":{"version":3,"sources":["E:/wcy/Github/fun-rec/codes/news_recsys/news_rec_web/my-app-ts/node_modules/ahooks/es/useTrackedEffect/index.js"],"names":["useEffect","useRef","diffTwoDeps","deps1","deps2","map","_ele","idx","filter","ele","useTrackedEffect","effect","deps","previousDepsRef","changes","current","previousDeps"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;;AAEA,IAAIC,WAAW,GAAG,SAASA,WAAT,CAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AACnD;AACA;AACA;AACA,SAAOD,KAAK,GAAGA,KAAK,CAACE,GAAN,CAAU,UAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AAC5C,WAAOJ,KAAK,CAACI,GAAD,CAAL,MAAgBH,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAK,CAAjC,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACG,GAAD,CAAnE,IAA4EA,GAA5E,GAAkF,CAAC,CAA1F;AACD,GAFc,EAEZC,MAFY,CAEL,UAAUC,GAAV,EAAe;AACvB,WAAOA,GAAG,IAAI,CAAd;AACD,GAJc,CAAH,GAIPL,KAAK,GAAGA,KAAK,CAACC,GAAN,CAAU,UAAUC,IAAV,EAAgBC,GAAhB,EAAqB;AAC1C,WAAOA,GAAP;AACD,GAFY,CAAH,GAEL,EANL;AAOD,CAXD;;AAaA,IAAIG,gBAAgB,GAAG,SAASA,gBAAT,CAA0BC,MAA1B,EAAkCC,IAAlC,EAAwC;AAC7D,MAAIC,eAAe,GAAGZ,MAAM,EAA5B;AACAD,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIc,OAAO,GAAGZ,WAAW,CAACW,eAAe,CAACE,OAAjB,EAA0BH,IAA1B,CAAzB;AACA,QAAII,YAAY,GAAGH,eAAe,CAACE,OAAnC;AACAF,IAAAA,eAAe,CAACE,OAAhB,GAA0BH,IAA1B;AACA,WAAOD,MAAM,CAACG,OAAD,EAAUE,YAAV,EAAwBJ,IAAxB,CAAb;AACD,GALQ,EAKNA,IALM,CAAT;AAMD,CARD;;AAUA,eAAeF,gBAAf","sourcesContent":["import { useEffect, useRef } from 'react';\n\nvar diffTwoDeps = function diffTwoDeps(deps1, deps2) {\n  //Let's do a reference equality check on 2 dependency list.\n  //If deps1 is defined, we iterate over deps1 and do comparison on each element with equivalent element from deps2\n  //As this func is used only in this hook, we assume 2 deps always have same length.\n  return deps1 ? deps1.map(function (_ele, idx) {\n    return deps1[idx] !== (deps2 === null || deps2 === void 0 ? void 0 : deps2[idx]) ? idx : -1;\n  }).filter(function (ele) {\n    return ele >= 0;\n  }) : deps2 ? deps2.map(function (_ele, idx) {\n    return idx;\n  }) : [];\n};\n\nvar useTrackedEffect = function useTrackedEffect(effect, deps) {\n  var previousDepsRef = useRef();\n  useEffect(function () {\n    var changes = diffTwoDeps(previousDepsRef.current, deps);\n    var previousDeps = previousDepsRef.current;\n    previousDepsRef.current = deps;\n    return effect(changes, previousDeps, deps);\n  }, deps);\n};\n\nexport default useTrackedEffect;"]},"metadata":{},"sourceType":"module"}