{"ast":null,"code":"import React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate, defaultRenderLabel } from '../date-picker/date-picker-utils';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel\n};\nexport const DatePickerView = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n  });\n  const pickerValue = useMemo(() => convertDateToStringArray(value, props.precision), [value, props.precision]);\n  const onChange = useCallback(val => {\n    var _a;\n\n    const date = convertStringArrayToDate(val, props.precision);\n\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter),\n    value: pickerValue,\n    onChange: onChange\n  }));\n};","map":{"version":3,"sources":["E:/wcy/Github/fun-rec/codes/news_recsys/news_rec_web/my-app-ts/node_modules/antd-mobile/es/components/date-picker-view/date-picker-view.js"],"names":["React","useCallback","useMemo","PickerView","withNativeProps","mergeProps","usePropsValue","generateDatePickerColumns","convertDateToStringArray","convertStringArrayToDate","defaultRenderLabel","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","renderLabel","DatePickerView","p","_a","props","value","setValue","defaultValue","pickerValue","onChange","val","date","call","createElement","columns","selected","filter"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,OAA7B,QAA4C,OAA5C;AACA,OAAOC,UAAP,MAAuB,gBAAvB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,yBAAT,EAAoCC,wBAApC,EAA8DC,wBAA9D,EAAwFC,kBAAxF,QAAkH,kCAAlH;AACA,MAAMC,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,WAAX,EAAjB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,GAAG,EAAE,IAAIH,IAAJ,CAAS,IAAIA,IAAJ,GAAWI,WAAX,CAAuBL,QAAQ,GAAG,EAAlC,CAAT,CADc;AAEnBM,EAAAA,GAAG,EAAE,IAAIL,IAAJ,CAAS,IAAIA,IAAJ,GAAWI,WAAX,CAAuBL,QAAQ,GAAG,EAAlC,CAAT,CAFc;AAGnBO,EAAAA,SAAS,EAAE,KAHQ;AAInBC,EAAAA,WAAW,EAAET;AAJM,CAArB;AAMA,OAAO,MAAMU,cAAc,GAAGC,CAAC,IAAI;AACjC,MAAIC,EAAJ;;AAEA,QAAMC,KAAK,GAAGlB,UAAU,CAACS,YAAD,EAAeO,CAAf,CAAxB;AACA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBnB,aAAa,CAAC;AACtCkB,IAAAA,KAAK,EAAED,KAAK,CAACC,KADyB;AAEtCE,IAAAA,YAAY,EAAE,CAACJ,EAAE,GAAGC,KAAK,CAACG,YAAZ,MAA8B,IAA9B,IAAsCJ,EAAE,KAAK,KAAK,CAAlD,GAAsDA,EAAtD,GAA2D;AAFnC,GAAD,CAAvC;AAIA,QAAMK,WAAW,GAAGzB,OAAO,CAAC,MAAMM,wBAAwB,CAACgB,KAAD,EAAQD,KAAK,CAACL,SAAd,CAA/B,EAAyD,CAACM,KAAD,EAAQD,KAAK,CAACL,SAAd,CAAzD,CAA3B;AACA,QAAMU,QAAQ,GAAG3B,WAAW,CAAC4B,GAAG,IAAI;AAClC,QAAIP,EAAJ;;AAEA,UAAMQ,IAAI,GAAGrB,wBAAwB,CAACoB,GAAD,EAAMN,KAAK,CAACL,SAAZ,CAArC;;AAEA,QAAIY,IAAJ,EAAU;AACRL,MAAAA,QAAQ,CAACK,IAAD,CAAR;AACA,OAACR,EAAE,GAAGC,KAAK,CAACK,QAAZ,MAA0B,IAA1B,IAAkCN,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACS,IAAH,CAAQR,KAAR,EAAeO,IAAf,CAA3D;AACD;AACF,GAT2B,EASzB,CAACP,KAAK,CAACK,QAAP,EAAiBL,KAAK,CAACL,SAAvB,CATyB,CAA5B;AAUA,SAAOd,eAAe,CAACmB,KAAD,EAAQvB,KAAK,CAACgC,aAAN,CAAoB7B,UAApB,EAAgC;AAC5D8B,IAAAA,OAAO,EAAEC,QAAQ,IAAI3B,yBAAyB,CAAC2B,QAAD,EAAWX,KAAK,CAACR,GAAjB,EAAsBQ,KAAK,CAACN,GAA5B,EAAiCM,KAAK,CAACL,SAAvC,EAAkDK,KAAK,CAACJ,WAAxD,EAAqEI,KAAK,CAACY,MAA3E,CADc;AAE5DX,IAAAA,KAAK,EAAEG,WAFqD;AAG5DC,IAAAA,QAAQ,EAAEA;AAHkD,GAAhC,CAAR,CAAtB;AAKD,CAxBM","sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport PickerView from '../picker-view';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { generateDatePickerColumns, convertDateToStringArray, convertStringArrayToDate, defaultRenderLabel } from '../date-picker/date-picker-utils';\nconst thisYear = new Date().getFullYear();\nconst defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day',\n  renderLabel: defaultRenderLabel\n};\nexport const DatePickerView = p => {\n  var _a;\n\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null\n  });\n  const pickerValue = useMemo(() => convertDateToStringArray(value, props.precision), [value, props.precision]);\n  const onChange = useCallback(val => {\n    var _a;\n\n    const date = convertStringArrayToDate(val, props.precision);\n\n    if (date) {\n      setValue(date);\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onChange, props.precision]);\n  return withNativeProps(props, React.createElement(PickerView, {\n    columns: selected => generateDatePickerColumns(selected, props.min, props.max, props.precision, props.renderLabel, props.filter),\n    value: pickerValue,\n    onChange: onChange\n  }));\n};"]},"metadata":{},"sourceType":"module"}